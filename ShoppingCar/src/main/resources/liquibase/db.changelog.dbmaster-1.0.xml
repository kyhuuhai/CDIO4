<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog 
http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd"
logicalFilePath="db.changelog.dbmaster-1.0.xml">
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-1">
        <createTable tableName="cthoadon">
            <column name="idcthoadon" type="VARCHAR(36)">
                <constraints nullable="false"/>
            </column>
            <column name="soluong" type="INT"/>
            <column name="id_sp" type="VARCHAR(36)"/>
            <column name="id_hoadon" type="VARCHAR(36)"/>
        </createTable>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-2">
        <createTable tableName="hoadon">
            <column name="idhoadon" type="VARCHAR(36)">
                <constraints nullable="false"/>
            </column>
            <column name="ten_hoadon" type="VARCHAR(45)"/>
            <column name="ngayban" type="date"/>
            <column name="iduser" type="VARCHAR(36)"/>
        </createTable>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-3">
        <createTable tableName="khachhang">
            <column name="idkhachhang" type="VARCHAR(36)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(45)"/>
            <column name="ngaysinh" type="date"/>
            <column name="email" type="VARCHAR(45)"/>
            <column name="sdt" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-4">
        <createTable tableName="loaisp">
            <column name="idloaisp" type="VARCHAR(36)">
                <constraints nullable="false"/>
            </column>
            <column name="ten_loaisp" type="VARCHAR(45)"/>
        </createTable>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-5">
        <createTable tableName="roles">
            <column name="idroles" type="VARCHAR(36)">
                <constraints nullable="false"/>
            </column>
            <column name="name_roles" type="VARCHAR(45)"/>
        </createTable>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-6">
        <createTable tableName="sanpham">
            <column name="idsanpham" type="VARCHAR(36)">
                <constraints nullable="false"/>
            </column>
            <column name="tensp" type="VARCHAR(45)"/>
            <column name="dongiasp" type="FLOAT(12)"/>
            <column name="hinhanh" type="VARCHAR(255)"/>
            <column name="id_loaisp" type="VARCHAR(36)"/>
            <column name="id_thuonghieu" type="VARCHAR(36)"/>
        </createTable>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-7">
        <createTable tableName="thuonghieu">
            <column name="idthuonghieu" type="VARCHAR(36)">
                <constraints nullable="false"/>
            </column>
            <column name="ten_thuonghieu" type="VARCHAR(45)"/>
            <column name="diachi" type="VARCHAR(45)"/>
            <column name="hinhanh" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-8">
        <createTable tableName="user">
            <column name="iduser" type="VARCHAR(36)">
                <constraints nullable="false"/>
            </column>
            <column name="username" type="VARCHAR(45)"/>
            <column name="password" type="VARCHAR(45)"/>
        </createTable>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-9">
        <createTable tableName="user_roles">
            <column name="iduser_roles" type="VARCHAR(36)">
                <constraints nullable="false"/>
            </column>
            <column name="nameuser_roles" type="VARCHAR(45)"/>
            <column name="idroles" type="VARCHAR(36)"/>
            <column name="iduser" type="VARCHAR(36)"/>
        </createTable>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-10">
        <addPrimaryKey columnNames="idcthoadon" constraintName="PRIMARY" tableName="cthoadon"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-11">
        <addPrimaryKey columnNames="idhoadon" constraintName="PRIMARY" tableName="hoadon"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-12">
        <addPrimaryKey columnNames="idkhachhang" constraintName="PRIMARY" tableName="khachhang"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-13">
        <addPrimaryKey columnNames="idloaisp" constraintName="PRIMARY" tableName="loaisp"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-14">
        <addPrimaryKey columnNames="idroles" constraintName="PRIMARY" tableName="roles"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-15">
        <addPrimaryKey columnNames="idsanpham" constraintName="PRIMARY" tableName="sanpham"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-16">
        <addPrimaryKey columnNames="idthuonghieu" constraintName="PRIMARY" tableName="thuonghieu"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-17">
        <addPrimaryKey columnNames="iduser" constraintName="PRIMARY" tableName="user"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-18">
        <addPrimaryKey columnNames="iduser_roles" constraintName="PRIMARY" tableName="user_roles"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-19">
        <createIndex indexName="a_idx" tableName="cthoadon">
            <column name="id_hoadon"/>
        </createIndex>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-20">
        <createIndex indexName="b_idx" tableName="cthoadon">
            <column name="id_sp"/>
        </createIndex>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-21">
        <createIndex indexName="c_idx" tableName="hoadon">
            <column name="iduser"/>
        </createIndex>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-22">
        <createIndex indexName="i_idx" tableName="user_roles">
            <column name="iduser"/>
        </createIndex>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-23">
        <createIndex indexName="k_idx" tableName="user_roles">
            <column name="idroles"/>
        </createIndex>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-24">
        <createIndex indexName="r_idx" tableName="sanpham">
            <column name="id_loaisp"/>
        </createIndex>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-25">
        <createIndex indexName="v_idx" tableName="sanpham">
            <column name="id_thuonghieu"/>
        </createIndex>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-26">
        <addForeignKeyConstraint baseColumnNames="idkhachhang" baseTableName="khachhang" constraintName="h" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="iduser" referencedTableName="user"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-27">
        <addForeignKeyConstraint baseColumnNames="iduser" baseTableName="user_roles" constraintName="i" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="iduser" referencedTableName="user"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-28">
        <addForeignKeyConstraint baseColumnNames="idroles" baseTableName="user_roles" constraintName="k" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="idroles" referencedTableName="roles"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-29">
        <addForeignKeyConstraint baseColumnNames="id_loaisp" baseTableName="sanpham" constraintName="r" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="idloaisp" referencedTableName="loaisp"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-30">
        <addForeignKeyConstraint baseColumnNames="id_thuonghieu" baseTableName="sanpham" constraintName="v" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="idthuonghieu" referencedTableName="thuonghieu"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-31">
        <dropForeignKeyConstraint baseTableName="model" constraintName="e"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-32">
        <dropForeignKeyConstraint baseTableName="feature" constraintName="n"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-33">
        <dropForeignKeyConstraint baseTableName="feandcar" constraintName="z"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-34">
        <dropTable tableName="car"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-35">
        <dropTable tableName="feandcar"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-36">
        <dropTable tableName="feature"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-37">
        <dropTable tableName="feature_type"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-38">
        <dropTable tableName="make"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-39">
        <dropTable tableName="model"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-40">
        <dropForeignKeyConstraint baseTableName="cthoadon" constraintName="a"/>
        <addForeignKeyConstraint baseColumnNames="id_hoadon" baseTableName="cthoadon" constraintName="a" referencedColumnNames="idhoadon" referencedTableName="hoadon"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-41">
        <dropForeignKeyConstraint baseTableName="cthoadon" constraintName="b"/>
        <addForeignKeyConstraint baseColumnNames="id_sp" baseTableName="cthoadon" constraintName="b" referencedColumnNames="idsanpham" referencedTableName="sanpham"/>
    </changeSet>
    <changeSet author="Nguyễn Hữu Phúc (generated)" id="1477642085474-42">
        <dropForeignKeyConstraint baseTableName="hoadon" constraintName="c"/>
        <addForeignKeyConstraint baseColumnNames="iduser" baseTableName="hoadon" constraintName="c" referencedColumnNames="iduser" referencedTableName="user"/>
    </changeSet>
</databaseChangeLog>
